#
# The clientlaunch.cfg file is loaded by "xymonlaunch".
# It controls which of the Xymon client-side modules to run, 
# (both the main client "xymonclient.sh" and any client-side
# extensions); how often, and with which parameters, options 
# and environment variables.
#
# Note: On the Xymon *server* itself, this file is normally 
#       NOT used. Instead, both the client- and server-tasks
#       are controlled by the tasks.cfg file.
#

# msgcache is used for passive clients, that cannot connect
# directly to the Xymon server. This is not the default
# setup, so this task is normally disabled.
[msgcache]
	DISABLED
	ENVFILE $XYMONCLIENTHOME/etc/xymonclient.cfg
	CMD $XYMONCLIENTHOME/bin/msgcache --no-daemon --pidfile=$XYMONCLIENTLOGS/msgcache.pid
	LOGFILE $XYMONCLIENTLOGS/msgcache.log

# The main client task
[client]
	ENVFILE $XYMONCLIENTHOME/etc/xymonclient.cfg
	CMD $XYMONCLIENTHOME/bin/xymonclient.sh 
	LOGFILE $XYMONCLIENTLOGS/xymonclient.log
	INTERVAL 5m

<% @fields.each_pair do |key, val| %>[<%= key %>]
        <% unless @val.disabled? %>ENABLED<%= @val.cmd%><% else %>DISABLED<% end %> 
        <% unless @val.cmd.nil? %>CMD $XYMONCLIENTHOME/<%= @val.cmd%><% end %> 
        <% unless @val.onhost.nil? %>ONHOST $XYMONCLIENTHOME/<%= @val.onhost%><% end %> 
        <% unless @val.maxtime.nil? %>MAXTIME $XYMONCLIENTHOME/<%= @val.maxtime%><% end %> 
        <% unless @val.needs.nil? %>NEEDS $XYMONCLIENTHOME/<%= @val.needs%><% end %> 
        <% unless @val.group.nil? %>GROUP $XYMONCLIENTHOME/<%= @val.group%><% end %> 
        <% unless @val.interval.nil? %>INTERVAL $XYMONCLIENTHOME/<%= @val.interval%><% end %> 
        <% unless @val.crondate.nil? %>CRONDATE $XYMONCLIENTHOME/<%= @val.crontade%><% end %> 
        <% unless @val.envfile.nil? %>ENVFILE $XYMONCLIENTHOME/<%= @val.envfile%><% end %> 
        <% unless @val.envarea.nil? %>ENVAREA $XYMONCLIENTHOME/<%= @val.envarea%><% end %> 
        <% unless @val.logfile.nil? %>LOGFILE $XYMONCLIENTHOME/<%= @val.logfile%><% end %> 
<% end %>
